{"ast":null,"code":"var isBuffer = require('is-buffer');\n\nvar flat = module.exports = flatten;\nflatten.flatten = flatten;\nflatten.unflatten = unflatten;\n\nfunction flatten(target, opts) {\n  opts = opts || {};\n  var delimiter = opts.delimiter || '.';\n  var maxDepth = opts.maxDepth;\n  var output = {};\n\n  function step(object, prev, currentDepth) {\n    currentDepth = currentDepth ? currentDepth : 1;\n    Object.keys(object).forEach(function (key) {\n      var value = object[key];\n      var isarray = opts.safe && Array.isArray(value);\n      var type = Object.prototype.toString.call(value);\n      var isbuffer = isBuffer(value);\n      var isobject = type === \"[object Object]\" || type === \"[object Array]\";\n      var newKey = prev ? prev + delimiter + key : key;\n\n      if (!isarray && !isbuffer && isobject && Object.keys(value).length && (!opts.maxDepth || currentDepth < maxDepth)) {\n        return step(value, newKey, currentDepth + 1);\n      }\n\n      output[newKey] = value;\n    });\n  }\n\n  step(target);\n  return output;\n}\n\nfunction unflatten(target, opts) {\n  opts = opts || {};\n  var delimiter = opts.delimiter || '.';\n  var overwrite = opts.overwrite || false;\n  var result = {};\n  var isbuffer = isBuffer(target);\n\n  if (isbuffer || Object.prototype.toString.call(target) !== '[object Object]') {\n    return target;\n  } // safely ensure that the key is\n  // an integer.\n\n\n  function getkey(key) {\n    var parsedKey = Number(key);\n    return isNaN(parsedKey) || key.indexOf('.') !== -1 ? key : parsedKey;\n  }\n\n  Object.keys(target).forEach(function (key) {\n    var split = key.split(delimiter);\n    var key1 = getkey(split.shift());\n    var key2 = getkey(split[0]);\n    var recipient = result;\n\n    while (key2 !== undefined) {\n      var type = Object.prototype.toString.call(recipient[key1]);\n      var isobject = type === \"[object Object]\" || type === \"[object Array]\"; // do not write over falsey, non-undefined values if overwrite is false\n\n      if (!overwrite && !isobject && typeof recipient[key1] !== 'undefined') {\n        return;\n      }\n\n      if (overwrite && !isobject || !overwrite && recipient[key1] == null) {\n        recipient[key1] = typeof key2 === 'number' && !opts.object ? [] : {};\n      }\n\n      recipient = recipient[key1];\n\n      if (split.length > 0) {\n        key1 = getkey(split.shift());\n        key2 = getkey(split[0]);\n      }\n    } // unflatten again for 'messy objects'\n\n\n    recipient[key1] = unflatten(target[key], opts);\n  });\n  return result;\n}","map":{"version":3,"sources":["/Users/bly/Documents/工作/实验室/项目/医疗系统/PACS/pacs/node_modules/flat/index.js"],"names":["isBuffer","require","flat","module","exports","flatten","unflatten","target","opts","delimiter","maxDepth","output","step","object","prev","currentDepth","Object","keys","forEach","key","value","isarray","safe","Array","isArray","type","prototype","toString","call","isbuffer","isobject","newKey","length","overwrite","result","getkey","parsedKey","Number","isNaN","indexOf","split","key1","shift","key2","recipient","undefined"],"mappings":"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","sourcesContent":["var isBuffer = require('is-buffer')\n\nvar flat = module.exports = flatten\nflatten.flatten = flatten\nflatten.unflatten = unflatten\n\nfunction flatten(target, opts) {\n  opts = opts || {}\n\n  var delimiter = opts.delimiter || '.'\n  var maxDepth = opts.maxDepth\n  var output = {}\n\n  function step(object, prev, currentDepth) {\n    currentDepth = currentDepth ? currentDepth : 1\n    Object.keys(object).forEach(function(key) {\n      var value = object[key]\n      var isarray = opts.safe && Array.isArray(value)\n      var type = Object.prototype.toString.call(value)\n      var isbuffer = isBuffer(value)\n      var isobject = (\n        type === \"[object Object]\" ||\n        type === \"[object Array]\"\n      )\n\n      var newKey = prev\n        ? prev + delimiter + key\n        : key\n\n      if (!isarray && !isbuffer && isobject && Object.keys(value).length &&\n        (!opts.maxDepth || currentDepth < maxDepth)) {\n        return step(value, newKey, currentDepth + 1)\n      }\n\n      output[newKey] = value\n    })\n  }\n\n  step(target)\n\n  return output\n}\n\nfunction unflatten(target, opts) {\n  opts = opts || {}\n\n  var delimiter = opts.delimiter || '.'\n  var overwrite = opts.overwrite || false\n  var result = {}\n\n  var isbuffer = isBuffer(target)\n  if (isbuffer || Object.prototype.toString.call(target) !== '[object Object]') {\n    return target\n  }\n\n  // safely ensure that the key is\n  // an integer.\n  function getkey(key) {\n    var parsedKey = Number(key)\n\n    return (\n      isNaN(parsedKey) ||\n      key.indexOf('.') !== -1\n    ) ? key\n      : parsedKey\n  }\n\n  Object.keys(target).forEach(function(key) {\n    var split = key.split(delimiter)\n    var key1 = getkey(split.shift())\n    var key2 = getkey(split[0])\n    var recipient = result\n\n    while (key2 !== undefined) {\n      var type = Object.prototype.toString.call(recipient[key1])\n      var isobject = (\n        type === \"[object Object]\" ||\n        type === \"[object Array]\"\n      )\n\n      // do not write over falsey, non-undefined values if overwrite is false\n      if (!overwrite && !isobject && typeof recipient[key1] !== 'undefined') {\n        return\n      }\n\n      if ((overwrite && !isobject) || (!overwrite && recipient[key1] == null)) {\n        recipient[key1] = (\n          typeof key2 === 'number' &&\n          !opts.object ? [] : {}\n        )\n      }\n\n      recipient = recipient[key1]\n      if (split.length > 0) {\n        key1 = getkey(split.shift())\n        key2 = getkey(split[0])\n      }\n    }\n\n    // unflatten again for 'messy objects'\n    recipient[key1] = unflatten(target[key], opts)\n  })\n\n  return result\n}\n"]},"metadata":{},"sourceType":"script"}