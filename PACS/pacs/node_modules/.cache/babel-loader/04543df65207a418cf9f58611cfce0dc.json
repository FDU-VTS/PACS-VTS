{"ast":null,"code":"var _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nimport * as React from 'react';\nimport ReactDOMServer from 'react-dom/server';\nimport PropTypes from 'prop-types';\nimport { getTranslate, addTranslationForLanguage, getLanguages, getOptions, getActiveLanguage, getTranslationsForActiveLanguage } from './locale';\nimport { storeDidChange } from './utils';\nvar DEFAULT_LOCALE_STATE_NAME = 'locale';\nvar DEFAULT_REDUX_STORE_KEY = 'store';\nexport var Translate = function (_React$Component) {\n  _inherits(Translate, _React$Component);\n\n  function Translate(props, context) {\n    _classCallCheck(this, Translate);\n\n    var _this = _possibleConstructorReturn(this, (Translate.__proto__ || Object.getPrototypeOf(Translate)).call(this, props, context));\n\n    if (!_this.getStore()) {\n      throw new Error('react-localize-redux: Unable to locate redux store in context. Ensure your app is wrapped with <Provider />.');\n    }\n\n    if (!_this.getStateSlice().languages) {\n      throw new Error('react-localize-redux: cannot find languages ensure you have correctly dispatched initialize action.');\n    }\n\n    _this.state = {\n      hasUpdated: false\n    };\n    _this.onStateDidChange = _this.onStateDidChange.bind(_this);\n\n    _this.addDefaultTranslation();\n\n    return _this;\n  }\n\n  _createClass(Translate, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.unsubscribeFromStore = storeDidChange(this.getStore(), this.onStateDidChange);\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.unsubscribeFromStore();\n    }\n  }, {\n    key: 'onStateDidChange',\n    value: function onStateDidChange(prevState) {\n      var prevLocaleState = this.getStateSlice(prevState);\n      var curLocaleState = this.getStateSlice();\n      var prevActiveLanguage = getActiveLanguage(prevLocaleState);\n      var curActiveLanguage = getActiveLanguage(curLocaleState);\n      var prevOptions = getOptions(prevLocaleState);\n      var curOptions = getOptions(curLocaleState);\n      var prevTranslations = getTranslationsForActiveLanguage(prevLocaleState);\n      var curTranslations = getTranslationsForActiveLanguage(curLocaleState);\n      var hasActiveLangaugeChanged = prevActiveLanguage.code !== curActiveLanguage.code;\n      var hasOptionsChanged = prevOptions !== curOptions;\n      var hasTranslationsChanged = prevTranslations !== curTranslations;\n\n      if (hasActiveLangaugeChanged || hasOptionsChanged || hasTranslationsChanged) {\n        this.setState({\n          hasUpdated: true\n        });\n      }\n    }\n  }, {\n    key: 'addDefaultTranslation',\n    value: function addDefaultTranslation() {\n      var locale = this.getStateSlice();\n      var _props = this.props,\n          id = _props.id,\n          children = _props.children;\n\n      if (children === undefined || typeof children === 'function') {\n        return;\n      }\n\n      if (locale.options.ignoreTranslateChildren) {\n        return;\n      }\n\n      if (id !== undefined) {\n        var store = this.getStore();\n        var translation = ReactDOMServer.renderToStaticMarkup(children);\n        var defaultLanguage = locale.options.defaultLanguage || locale.languages[0].code;\n        store.dispatch(addTranslationForLanguage(_defineProperty({}, id, translation), defaultLanguage));\n      }\n    }\n  }, {\n    key: 'getStore',\n    value: function getStore() {\n      var storeKey = this.context.storeKey;\n      return this.context[storeKey || DEFAULT_REDUX_STORE_KEY];\n    }\n  }, {\n    key: 'getStateSlice',\n    value: function getStateSlice(myState) {\n      var _context = this.context,\n          getLocaleState = _context.getLocaleState,\n          storeKey = _context.storeKey;\n      var state = myState || this.getStore().getState();\n      return getLocaleState !== undefined ? getLocaleState(state) : state[DEFAULT_LOCALE_STATE_NAME] || state;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var translateFn = getTranslate(this.getStateSlice());\n      var activeLanguage = getActiveLanguage(this.getStateSlice());\n      var languages = getLanguages(this.getStateSlice());\n      var _props2 = this.props,\n          _props2$id = _props2.id,\n          id = _props2$id === undefined ? '' : _props2$id,\n          data = _props2.data,\n          options = _props2.options;\n      return typeof this.props.children === 'function' ? this.props.children(translateFn, activeLanguage, languages) : translateFn(id, data, options);\n    }\n  }]);\n\n  return Translate;\n}(React.Component);\nTranslate.contextTypes = {\n  store: PropTypes.shape({\n    subscribe: PropTypes.func.isRequired,\n    dispatch: PropTypes.func.isRequired,\n    getState: PropTypes.func.isRequired\n  }),\n  getLocaleState: PropTypes.func,\n  storeKey: PropTypes.string\n};","map":{"version":3,"sources":["/Users/bly/Documents/工作/实验室/项目/医疗系统/PACS-VTS/PACS-VTS/PACS/pacs/node_modules/react-localize-redux/es/Translate.js"],"names":["_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","_defineProperty","obj","value","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","React","ReactDOMServer","PropTypes","getTranslate","addTranslationForLanguage","getLanguages","getOptions","getActiveLanguage","getTranslationsForActiveLanguage","storeDidChange","DEFAULT_LOCALE_STATE_NAME","DEFAULT_REDUX_STORE_KEY","Translate","_React$Component","context","_this","getPrototypeOf","getStore","Error","getStateSlice","languages","state","hasUpdated","onStateDidChange","bind","addDefaultTranslation","componentDidMount","unsubscribeFromStore","componentWillUnmount","prevState","prevLocaleState","curLocaleState","prevActiveLanguage","curActiveLanguage","prevOptions","curOptions","prevTranslations","curTranslations","hasActiveLangaugeChanged","code","hasOptionsChanged","hasTranslationsChanged","setState","locale","_props","id","children","undefined","options","ignoreTranslateChildren","store","translation","renderToStaticMarkup","defaultLanguage","dispatch","storeKey","myState","_context","getLocaleState","getState","render","translateFn","activeLanguage","_props2","_props2$id","data","Component","contextTypes","shape","subscribe","func","isRequired","string"],"mappings":"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","sourcesContent":["var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport * as React from 'react';\nimport ReactDOMServer from 'react-dom/server';\nimport PropTypes from 'prop-types';\nimport { getTranslate, addTranslationForLanguage, getLanguages, getOptions, getActiveLanguage, getTranslationsForActiveLanguage } from './locale';\nimport { storeDidChange } from './utils';\n\n\nvar DEFAULT_LOCALE_STATE_NAME = 'locale';\nvar DEFAULT_REDUX_STORE_KEY = 'store';\n\nexport var Translate = function (_React$Component) {\n  _inherits(Translate, _React$Component);\n\n  function Translate(props, context) {\n    _classCallCheck(this, Translate);\n\n    var _this = _possibleConstructorReturn(this, (Translate.__proto__ || Object.getPrototypeOf(Translate)).call(this, props, context));\n\n    if (!_this.getStore()) {\n      throw new Error('react-localize-redux: Unable to locate redux store in context. Ensure your app is wrapped with <Provider />.');\n    }\n\n    if (!_this.getStateSlice().languages) {\n      throw new Error('react-localize-redux: cannot find languages ensure you have correctly dispatched initialize action.');\n    }\n\n    _this.state = {\n      hasUpdated: false\n    };\n\n    _this.onStateDidChange = _this.onStateDidChange.bind(_this);\n    _this.addDefaultTranslation();\n    return _this;\n  }\n\n  _createClass(Translate, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.unsubscribeFromStore = storeDidChange(this.getStore(), this.onStateDidChange);\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.unsubscribeFromStore();\n    }\n  }, {\n    key: 'onStateDidChange',\n    value: function onStateDidChange(prevState) {\n      var prevLocaleState = this.getStateSlice(prevState);\n      var curLocaleState = this.getStateSlice();\n\n      var prevActiveLanguage = getActiveLanguage(prevLocaleState);\n      var curActiveLanguage = getActiveLanguage(curLocaleState);\n\n      var prevOptions = getOptions(prevLocaleState);\n      var curOptions = getOptions(curLocaleState);\n\n      var prevTranslations = getTranslationsForActiveLanguage(prevLocaleState);\n      var curTranslations = getTranslationsForActiveLanguage(curLocaleState);\n\n      var hasActiveLangaugeChanged = prevActiveLanguage.code !== curActiveLanguage.code;\n      var hasOptionsChanged = prevOptions !== curOptions;\n      var hasTranslationsChanged = prevTranslations !== curTranslations;\n\n      if (hasActiveLangaugeChanged || hasOptionsChanged || hasTranslationsChanged) {\n        this.setState({ hasUpdated: true });\n      }\n    }\n  }, {\n    key: 'addDefaultTranslation',\n    value: function addDefaultTranslation() {\n      var locale = this.getStateSlice();\n      var _props = this.props,\n          id = _props.id,\n          children = _props.children;\n\n\n      if (children === undefined || typeof children === 'function') {\n        return;\n      }\n\n      if (locale.options.ignoreTranslateChildren) {\n        return;\n      }\n\n      if (id !== undefined) {\n        var store = this.getStore();\n        var translation = ReactDOMServer.renderToStaticMarkup(children);\n        var defaultLanguage = locale.options.defaultLanguage || locale.languages[0].code;\n        store.dispatch(addTranslationForLanguage(_defineProperty({}, id, translation), defaultLanguage));\n      }\n    }\n  }, {\n    key: 'getStore',\n    value: function getStore() {\n      var storeKey = this.context.storeKey;\n\n      return this.context[storeKey || DEFAULT_REDUX_STORE_KEY];\n    }\n  }, {\n    key: 'getStateSlice',\n    value: function getStateSlice(myState) {\n      var _context = this.context,\n          getLocaleState = _context.getLocaleState,\n          storeKey = _context.storeKey;\n\n      var state = myState || this.getStore().getState();\n      return getLocaleState !== undefined ? getLocaleState(state) : state[DEFAULT_LOCALE_STATE_NAME] || state;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var translateFn = getTranslate(this.getStateSlice());\n      var activeLanguage = getActiveLanguage(this.getStateSlice());\n      var languages = getLanguages(this.getStateSlice());\n      var _props2 = this.props,\n          _props2$id = _props2.id,\n          id = _props2$id === undefined ? '' : _props2$id,\n          data = _props2.data,\n          options = _props2.options;\n\n      return typeof this.props.children === 'function' ? this.props.children(translateFn, activeLanguage, languages) : translateFn(id, data, options);\n    }\n  }]);\n\n  return Translate;\n}(React.Component);\n\nTranslate.contextTypes = {\n  store: PropTypes.shape({\n    subscribe: PropTypes.func.isRequired,\n    dispatch: PropTypes.func.isRequired,\n    getState: PropTypes.func.isRequired\n  }),\n  getLocaleState: PropTypes.func,\n  storeKey: PropTypes.string\n};"]},"metadata":{},"sourceType":"module"}