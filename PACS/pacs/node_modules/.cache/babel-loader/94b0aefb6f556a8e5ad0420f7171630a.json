{"ast":null,"code":"import _toConsumableArray from 'babel-runtime/helpers/toConsumableArray';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _without from 'lodash/without';\nimport _set from 'lodash/set';\nimport _get from 'lodash/get';\nimport _uniq from 'lodash/uniq';\nimport _isEmpty from 'lodash/isEmpty';\nimport _some from 'lodash/some';\nimport _has from 'lodash/has';\nimport _isArray from 'lodash/isArray';\nimport _last from 'lodash/last';\nimport _forEach from 'lodash/forEach';\n\nvar EventTarget = function EventTarget(target) {\n  var _this = this;\n\n  _classCallCheck(this, EventTarget);\n\n  this._handlers = {};\n  this._pools = {};\n\n  this._emit = function (name) {\n    return function (event) {\n      _forEach(_this._pools, function (pool, poolName) {\n        var handlers = pool[name];\n        if (!handlers) return;\n\n        if (poolName === 'default') {\n          _forEach(handlers, function (handler) {\n            return handler(event);\n          });\n\n          return;\n        }\n\n        _last(handlers)(event);\n      });\n    };\n  };\n\n  this._normalize = function (handlers) {\n    return _isArray(handlers) ? handlers : [handlers];\n  };\n\n  this._listen = function (name) {\n    if (_has(_this._handlers, name)) return;\n\n    var handler = _this._emit(name);\n\n    _this.target.addEventListener(name, handler);\n\n    _this._handlers[name] = handler;\n  };\n\n  this._unlisten = function (name) {\n    if (_some(_this._pools, name)) return;\n    var handler = _this._handlers[name];\n\n    _this.target.removeEventListener(name, handler);\n\n    delete _this._handlers[name];\n  };\n\n  this.empty = function () {\n    return _isEmpty(_this._handlers);\n  };\n\n  this.sub = function (name, handlers) {\n    var pool = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'default';\n\n    var events = _uniq([].concat(_toConsumableArray(_get(_this._pools, pool + '.' + name, [])), _toConsumableArray(_this._normalize(handlers))));\n\n    _this._listen(name);\n\n    _set(_this._pools, pool + '.' + name, events);\n  };\n\n  this.unsub = function (name, handlers) {\n    var pool = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'default';\n\n    var events = _without.apply(undefined, [_get(_this._pools, pool + '.' + name, [])].concat(_toConsumableArray(_this._normalize(handlers))));\n\n    if (events.length > 0) {\n      _set(_this._pools, pool + '.' + name, events);\n\n      return;\n    }\n\n    _set(_this._pools, pool + '.' + name, undefined);\n\n    _this._unlisten(name);\n  };\n\n  this.target = target;\n} // ------------------------------------\n// Utils\n// ------------------------------------\n// ------------------------------------\n// Listeners handling\n// ------------------------------------\n// ------------------------------------\n// Pub/sub\n// ------------------------------------\n;\n\nexport default EventTarget;","map":{"version":3,"sources":["/Users/bly/Documents/工作/实验室/项目/医疗系统/PACS/pacs/node_modules/semantic-ui-react/dist/es/lib/eventStack/EventTarget.js"],"names":["_toConsumableArray","_classCallCheck","_without","_set","_get","_uniq","_isEmpty","_some","_has","_isArray","_last","_forEach","EventTarget","target","_this","_handlers","_pools","_emit","name","event","pool","poolName","handlers","handler","_normalize","_listen","addEventListener","_unlisten","removeEventListener","empty","sub","arguments","length","undefined","events","concat","unsub","apply"],"mappings":"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","sourcesContent":["import _toConsumableArray from 'babel-runtime/helpers/toConsumableArray';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _without from 'lodash/without';\nimport _set from 'lodash/set';\nimport _get from 'lodash/get';\nimport _uniq from 'lodash/uniq';\nimport _isEmpty from 'lodash/isEmpty';\nimport _some from 'lodash/some';\nimport _has from 'lodash/has';\nimport _isArray from 'lodash/isArray';\nimport _last from 'lodash/last';\nimport _forEach from 'lodash/forEach';\n\nvar EventTarget = function EventTarget(target) {\n  var _this = this;\n\n  _classCallCheck(this, EventTarget);\n\n  this._handlers = {};\n  this._pools = {};\n\n  this._emit = function (name) {\n    return function (event) {\n      _forEach(_this._pools, function (pool, poolName) {\n        var handlers = pool[name];\n\n\n        if (!handlers) return;\n        if (poolName === 'default') {\n          _forEach(handlers, function (handler) {\n            return handler(event);\n          });\n          return;\n        }\n        _last(handlers)(event);\n      });\n    };\n  };\n\n  this._normalize = function (handlers) {\n    return _isArray(handlers) ? handlers : [handlers];\n  };\n\n  this._listen = function (name) {\n    if (_has(_this._handlers, name)) return;\n    var handler = _this._emit(name);\n\n    _this.target.addEventListener(name, handler);\n    _this._handlers[name] = handler;\n  };\n\n  this._unlisten = function (name) {\n    if (_some(_this._pools, name)) return;\n    var handler = _this._handlers[name];\n\n\n    _this.target.removeEventListener(name, handler);\n    delete _this._handlers[name];\n  };\n\n  this.empty = function () {\n    return _isEmpty(_this._handlers);\n  };\n\n  this.sub = function (name, handlers) {\n    var pool = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'default';\n\n    var events = _uniq([].concat(_toConsumableArray(_get(_this._pools, pool + '.' + name, [])), _toConsumableArray(_this._normalize(handlers))));\n\n    _this._listen(name);\n    _set(_this._pools, pool + '.' + name, events);\n  };\n\n  this.unsub = function (name, handlers) {\n    var pool = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'default';\n\n    var events = _without.apply(undefined, [_get(_this._pools, pool + '.' + name, [])].concat(_toConsumableArray(_this._normalize(handlers))));\n\n    if (events.length > 0) {\n      _set(_this._pools, pool + '.' + name, events);\n      return;\n    }\n\n    _set(_this._pools, pool + '.' + name, undefined);\n    _this._unlisten(name);\n  };\n\n  this.target = target;\n}\n\n// ------------------------------------\n// Utils\n// ------------------------------------\n\n// ------------------------------------\n// Listeners handling\n// ------------------------------------\n\n// ------------------------------------\n// Pub/sub\n// ------------------------------------\n\n;\n\nexport default EventTarget;"]},"metadata":{},"sourceType":"module"}