{"ast":null,"code":"import _slicedToArray from 'babel-runtime/helpers/slicedToArray';\nimport _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport _invoke from 'lodash/invoke';\nimport _forEach from 'lodash/forEach';\nimport _without from 'lodash/without';\nimport _includes from 'lodash/includes';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { eventStack, customPropTypes, getElementType, getUnhandledProps, META, normalizeOffset, isBrowser } from '../../lib';\n/**\n * Visibility provides a set of callbacks for when a content appears in the viewport.\n */\n\nvar Visibility = function (_Component) {\n  _inherits(Visibility, _Component);\n\n  function Visibility() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Visibility);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Visibility.__proto__ || Object.getPrototypeOf(Visibility)).call.apply(_ref, [this].concat(args))), _this), _this.calculations = {\n      bottomPassed: false,\n      bottomVisible: false,\n      fits: false,\n      passing: false,\n      offScreen: false,\n      onScreen: false,\n      topPassed: false,\n      topVisible: false\n    }, _this.firedCallbacks = [], _this.fire = function (_ref2, value) {\n      var callback = _ref2.callback,\n          name = _ref2.name;\n      var reverse = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var _this$props = _this.props,\n          continuous = _this$props.continuous,\n          once = _this$props.once; // Heads up! For the execution is required:\n      // - current value correspond to the fired direction\n      // - `continuous` is true or calculation values are different\n\n      var matchesDirection = _this.calculations[value] !== reverse;\n      var executionPossible = continuous || _this.calculations[value] !== _this.oldCalculations[value];\n      if (matchesDirection && executionPossible) _this.execute(callback, name); // Heads up! We should remove callback from the happened when it's not `once`\n\n      if (!once) _this.firedCallbacks = _without(_this.firedCallbacks, name);\n    }, _this.handleUpdate = function () {\n      if (_this.ticking) return;\n      _this.ticking = true;\n      requestAnimationFrame(_this.update);\n    }, _this.update = function () {\n      _this.ticking = false;\n      _this.oldCalculations = _this.calculations;\n      _this.calculations = _this.computeCalculations();\n      _this.pageYOffset = window.pageYOffset;\n      var _this$props2 = _this.props,\n          onBottomPassed = _this$props2.onBottomPassed,\n          onBottomPassedReverse = _this$props2.onBottomPassedReverse,\n          onBottomVisible = _this$props2.onBottomVisible,\n          onBottomVisibleReverse = _this$props2.onBottomVisibleReverse,\n          onPassing = _this$props2.onPassing,\n          onPassingReverse = _this$props2.onPassingReverse,\n          onTopPassed = _this$props2.onTopPassed,\n          onTopPassedReverse = _this$props2.onTopPassedReverse,\n          onTopVisible = _this$props2.onTopVisible,\n          onTopVisibleReverse = _this$props2.onTopVisibleReverse,\n          onOffScreen = _this$props2.onOffScreen,\n          onOnScreen = _this$props2.onOnScreen;\n      var forward = {\n        bottomPassed: {\n          callback: onBottomPassed,\n          name: 'onBottomPassed'\n        },\n        bottomVisible: {\n          callback: onBottomVisible,\n          name: 'onBottomVisible'\n        },\n        passing: {\n          callback: onPassing,\n          name: 'onPassing'\n        },\n        offScreen: {\n          callback: onOffScreen,\n          name: 'onOffScreen'\n        },\n        onScreen: {\n          callback: onOnScreen,\n          name: 'onOnScreen'\n        },\n        topPassed: {\n          callback: onTopPassed,\n          name: 'onTopPassed'\n        },\n        topVisible: {\n          callback: onTopVisible,\n          name: 'onTopVisible'\n        }\n      };\n      var reverse = {\n        bottomPassed: {\n          callback: onBottomPassedReverse,\n          name: 'onBottomPassedReverse'\n        },\n        bottomVisible: {\n          callback: onBottomVisibleReverse,\n          name: 'onBottomVisibleReverse'\n        },\n        passing: {\n          callback: onPassingReverse,\n          name: 'onPassingReverse'\n        },\n        topPassed: {\n          callback: onTopPassedReverse,\n          name: 'onTopPassedReverse'\n        },\n        topVisible: {\n          callback: onTopVisibleReverse,\n          name: 'onTopVisibleReverse'\n        }\n      };\n\n      _invoke(_this.props, 'onUpdate', null, _extends({}, _this.props, {\n        calculations: _this.calculations\n      }));\n\n      _this.fireOnPassed(); // Heads up! Reverse callbacks should be fired first\n\n\n      _forEach(reverse, function (data, value) {\n        return _this.fire(data, value, true);\n      });\n\n      _forEach(forward, function (data, value) {\n        return _this.fire(data, value);\n      });\n    }, _this.handleRef = function (c) {\n      return _this.ref = c;\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Visibility, [{\n    key: 'componentWillReceiveProps',\n    // ----------------------------------------\n    // Lifecycle\n    // ----------------------------------------\n    value: function componentWillReceiveProps(_ref3) {\n      var continuous = _ref3.continuous,\n          once = _ref3.once,\n          context = _ref3.context;\n      var cleanHappened = continuous !== this.props.continuous || once !== this.props.once; // Heads up! We should clean up array of happened callbacks, if values of these props are changed\n\n      if (cleanHappened) this.firedCallbacks = [];\n\n      if (this.props.context !== context) {\n        this.unattachHandlers(this.props.context);\n        this.attachHandlers(context);\n      }\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (!isBrowser()) return;\n      var _props = this.props,\n          context = _props.context,\n          fireOnMount = _props.fireOnMount;\n      this.pageYOffset = window.pageYOffset;\n      this.attachHandlers(context);\n      if (fireOnMount) this.update();\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      var context = this.props.context;\n      this.unattachHandlers(context);\n    }\n  }, {\n    key: 'attachHandlers',\n    value: function attachHandlers(context) {\n      if (context) {\n        eventStack.sub('resize', this.handleUpdate, {\n          target: context\n        });\n        eventStack.sub('scroll', this.handleUpdate, {\n          target: context\n        });\n      }\n    }\n  }, {\n    key: 'unattachHandlers',\n    value: function unattachHandlers(context) {\n      if (context) {\n        eventStack.unsub('resize', this.handleUpdate, {\n          target: context\n        });\n        eventStack.unsub('scroll', this.handleUpdate, {\n          target: context\n        });\n      }\n    } // ----------------------------------------\n    // Callback handling\n    // ----------------------------------------\n\n  }, {\n    key: 'execute',\n    value: function execute(callback, name) {\n      var continuous = this.props.continuous;\n      if (!callback) return; // Heads up! When `continuous` is true, callback will be fired always\n\n      if (!continuous && _includes(this.firedCallbacks, name)) return;\n      callback(null, _extends({}, this.props, {\n        calculations: this.calculations\n      }));\n      this.firedCallbacks.push(name);\n    }\n  }, {\n    key: 'fireOnPassed',\n    value: function fireOnPassed() {\n      var _this2 = this;\n\n      var _calculations = this.calculations,\n          percentagePassed = _calculations.percentagePassed,\n          pixelsPassed = _calculations.pixelsPassed;\n      var onPassed = this.props.onPassed;\n\n      _forEach(onPassed, function (callback, passed) {\n        var pixelsValue = Number(passed);\n\n        if (pixelsValue && pixelsPassed >= pixelsValue) {\n          _this2.execute(callback, passed);\n\n          return;\n        }\n\n        var matchPercentage = ('' + passed).match(/^(\\d+)%$/);\n        if (!matchPercentage) return;\n        var percentageValue = Number(matchPercentage[1]) / 100;\n        if (percentagePassed >= percentageValue) _this2.execute(callback, passed);\n      });\n    }\n  }, {\n    key: 'computeCalculations',\n    // ----------------------------------------\n    // Helpers\n    // ----------------------------------------\n    value: function computeCalculations() {\n      var offset = this.props.offset;\n\n      var _ref$getBoundingClien = this.ref.getBoundingClientRect(),\n          bottom = _ref$getBoundingClien.bottom,\n          height = _ref$getBoundingClien.height,\n          top = _ref$getBoundingClien.top,\n          width = _ref$getBoundingClien.width;\n\n      var _normalizeOffset = normalizeOffset(offset),\n          _normalizeOffset2 = _slicedToArray(_normalizeOffset, 2),\n          topOffset = _normalizeOffset2[0],\n          bottomOffset = _normalizeOffset2[1];\n\n      var direction = window.pageYOffset > this.pageYOffset ? 'down' : 'up';\n      var topPassed = top < topOffset;\n      var bottomPassed = bottom < bottomOffset;\n      var pixelsPassed = bottomPassed ? 0 : Math.max(top * -1, 0);\n      var percentagePassed = pixelsPassed / height;\n      var bottomVisible = bottom >= bottomOffset && bottom <= window.innerHeight;\n      var topVisible = top >= topOffset && top <= window.innerHeight;\n      var fits = topVisible && bottomVisible;\n      var passing = topPassed && !bottomPassed;\n      var onScreen = (topVisible || topPassed) && !bottomPassed;\n      var offScreen = !onScreen;\n      return {\n        bottomPassed: bottomPassed,\n        bottomVisible: bottomVisible,\n        direction: direction,\n        fits: fits,\n        height: height,\n        passing: passing,\n        percentagePassed: percentagePassed,\n        pixelsPassed: pixelsPassed,\n        offScreen: offScreen,\n        onScreen: onScreen,\n        topPassed: topPassed,\n        topVisible: topVisible,\n        width: width\n      };\n    } // ----------------------------------------\n    // Refs\n    // ----------------------------------------\n\n  }, {\n    key: 'render',\n    // ----------------------------------------\n    // Render\n    // ----------------------------------------\n    value: function render() {\n      var children = this.props.children;\n      var ElementType = getElementType(Visibility, this.props);\n      var rest = getUnhandledProps(Visibility, this.props);\n      return React.createElement(ElementType, _extends({}, rest, {\n        ref: this.handleRef\n      }), children);\n    }\n  }]);\n\n  return Visibility;\n}(Component);\n\nVisibility.defaultProps = {\n  context: isBrowser() ? window : null,\n  continuous: false,\n  offset: [0, 0],\n  once: true\n};\nVisibility._meta = {\n  name: 'Visibility',\n  type: META.TYPES.BEHAVIOR\n};\nVisibility.handledProps = ['as', 'children', 'context', 'continuous', 'fireOnMount', 'offset', 'onBottomPassed', 'onBottomPassedReverse', 'onBottomVisible', 'onBottomVisibleReverse', 'onOffScreen', 'onOnScreen', 'onPassed', 'onPassing', 'onPassingReverse', 'onTopPassed', 'onTopPassedReverse', 'onTopVisible', 'onTopVisibleReverse', 'onUpdate', 'once'];\nexport default Visibility;\nVisibility.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  /** An element type to render as (string or function). */\n  as: customPropTypes.as,\n\n  /** Primary content. */\n  children: PropTypes.node,\n\n  /** Context which visibility should attach onscroll events. */\n  context: PropTypes.object,\n\n  /**\n   * When set to true a callback will occur anytime an element passes a condition not just immediately after the\n   * threshold is met.\n   */\n  continuous: PropTypes.bool,\n\n  /** Fires callbacks immediately after mount. */\n  fireOnMount: PropTypes.bool,\n\n  /**\n   * Element's bottom edge has passed top of screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onBottomPassed: PropTypes.func,\n\n  /**\n   * Element's bottom edge has not passed top of screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onBottomPassedReverse: PropTypes.func,\n\n  /**\n   * Element's bottom edge has passed bottom of screen\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onBottomVisible: PropTypes.func,\n\n  /**\n   * Element's bottom edge has not passed bottom of screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onBottomVisibleReverse: PropTypes.func,\n\n  /**\n   * Value that context should be adjusted in pixels. Useful for making content appear below content fixed to the\n   * page.\n   */\n  offset: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.string]))]),\n\n  /** When set to false a callback will occur each time an element passes the threshold for a condition. */\n  once: PropTypes.bool,\n\n  /** Element is not visible on the screen. */\n  onPassed: PropTypes.object,\n\n  /**\n   * Any part of an element is visible on screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onPassing: PropTypes.func,\n\n  /**\n   * Element's top has not passed top of screen but bottom has.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onPassingReverse: PropTypes.func,\n\n  /**\n   * Element is not visible on the screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onOffScreen: PropTypes.func,\n\n  /**\n   * Element is visible on the screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onOnScreen: PropTypes.func,\n\n  /**\n   * Element's top edge has passed top of the screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onTopPassed: PropTypes.func,\n\n  /**\n   * Element's top edge has not passed top of the screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onTopPassedReverse: PropTypes.func,\n\n  /**\n   * Element's top edge has passed bottom of screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onTopVisible: PropTypes.func,\n\n  /**\n   * Element's top edge has not passed bottom of screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onTopVisibleReverse: PropTypes.func,\n\n  /**\n   * Element's top edge has passed bottom of screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onUpdate: PropTypes.func\n} : {};","map":{"version":3,"sources":["/Users/bly/Documents/工作/实验室/项目/医疗系统/PACS/pacs/node_modules/semantic-ui-react/dist/es/behaviors/Visibility/Visibility.js"],"names":["_slicedToArray","_extends","_classCallCheck","_createClass","_possibleConstructorReturn","_inherits","_invoke","_forEach","_without","_includes","PropTypes","React","Component","eventStack","customPropTypes","getElementType","getUnhandledProps","META","normalizeOffset","isBrowser","Visibility","_Component","_ref","_temp","_this","_ret","_len","arguments","length","args","Array","_key","__proto__","Object","getPrototypeOf","call","apply","concat","calculations","bottomPassed","bottomVisible","fits","passing","offScreen","onScreen","topPassed","topVisible","firedCallbacks","fire","_ref2","value","callback","name","reverse","undefined","_this$props","props","continuous","once","matchesDirection","executionPossible","oldCalculations","execute","handleUpdate","ticking","requestAnimationFrame","update","computeCalculations","pageYOffset","window","_this$props2","onBottomPassed","onBottomPassedReverse","onBottomVisible","onBottomVisibleReverse","onPassing","onPassingReverse","onTopPassed","onTopPassedReverse","onTopVisible","onTopVisibleReverse","onOffScreen","onOnScreen","forward","fireOnPassed","data","handleRef","c","ref","key","componentWillReceiveProps","_ref3","context","cleanHappened","unattachHandlers","attachHandlers","componentDidMount","_props","fireOnMount","componentWillUnmount","sub","target","unsub","push","_this2","_calculations","percentagePassed","pixelsPassed","onPassed","passed","pixelsValue","Number","matchPercentage","match","percentageValue","offset","_ref$getBoundingClien","getBoundingClientRect","bottom","height","top","width","_normalizeOffset","_normalizeOffset2","topOffset","bottomOffset","direction","Math","max","innerHeight","render","children","ElementType","rest","createElement","defaultProps","_meta","type","TYPES","BEHAVIOR","handledProps","propTypes","process","env","NODE_ENV","as","node","object","bool","func","oneOfType","number","string","arrayOf","onUpdate"],"mappings":"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","sourcesContent":["import _slicedToArray from 'babel-runtime/helpers/slicedToArray';\nimport _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport _invoke from 'lodash/invoke';\nimport _forEach from 'lodash/forEach';\nimport _without from 'lodash/without';\nimport _includes from 'lodash/includes';\n\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\n\nimport { eventStack, customPropTypes, getElementType, getUnhandledProps, META, normalizeOffset, isBrowser } from '../../lib';\n\n/**\n * Visibility provides a set of callbacks for when a content appears in the viewport.\n */\n\nvar Visibility = function (_Component) {\n  _inherits(Visibility, _Component);\n\n  function Visibility() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Visibility);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Visibility.__proto__ || Object.getPrototypeOf(Visibility)).call.apply(_ref, [this].concat(args))), _this), _this.calculations = {\n      bottomPassed: false,\n      bottomVisible: false,\n      fits: false,\n      passing: false,\n      offScreen: false,\n      onScreen: false,\n      topPassed: false,\n      topVisible: false\n    }, _this.firedCallbacks = [], _this.fire = function (_ref2, value) {\n      var callback = _ref2.callback,\n          name = _ref2.name;\n      var reverse = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var _this$props = _this.props,\n          continuous = _this$props.continuous,\n          once = _this$props.once;\n\n      // Heads up! For the execution is required:\n      // - current value correspond to the fired direction\n      // - `continuous` is true or calculation values are different\n\n      var matchesDirection = _this.calculations[value] !== reverse;\n      var executionPossible = continuous || _this.calculations[value] !== _this.oldCalculations[value];\n\n      if (matchesDirection && executionPossible) _this.execute(callback, name);\n\n      // Heads up! We should remove callback from the happened when it's not `once`\n      if (!once) _this.firedCallbacks = _without(_this.firedCallbacks, name);\n    }, _this.handleUpdate = function () {\n      if (_this.ticking) return;\n\n      _this.ticking = true;\n      requestAnimationFrame(_this.update);\n    }, _this.update = function () {\n      _this.ticking = false;\n\n      _this.oldCalculations = _this.calculations;\n      _this.calculations = _this.computeCalculations();\n      _this.pageYOffset = window.pageYOffset;\n\n      var _this$props2 = _this.props,\n          onBottomPassed = _this$props2.onBottomPassed,\n          onBottomPassedReverse = _this$props2.onBottomPassedReverse,\n          onBottomVisible = _this$props2.onBottomVisible,\n          onBottomVisibleReverse = _this$props2.onBottomVisibleReverse,\n          onPassing = _this$props2.onPassing,\n          onPassingReverse = _this$props2.onPassingReverse,\n          onTopPassed = _this$props2.onTopPassed,\n          onTopPassedReverse = _this$props2.onTopPassedReverse,\n          onTopVisible = _this$props2.onTopVisible,\n          onTopVisibleReverse = _this$props2.onTopVisibleReverse,\n          onOffScreen = _this$props2.onOffScreen,\n          onOnScreen = _this$props2.onOnScreen;\n\n      var forward = {\n        bottomPassed: { callback: onBottomPassed, name: 'onBottomPassed' },\n        bottomVisible: { callback: onBottomVisible, name: 'onBottomVisible' },\n        passing: { callback: onPassing, name: 'onPassing' },\n        offScreen: { callback: onOffScreen, name: 'onOffScreen' },\n        onScreen: { callback: onOnScreen, name: 'onOnScreen' },\n        topPassed: { callback: onTopPassed, name: 'onTopPassed' },\n        topVisible: { callback: onTopVisible, name: 'onTopVisible' }\n      };\n\n      var reverse = {\n        bottomPassed: { callback: onBottomPassedReverse, name: 'onBottomPassedReverse' },\n        bottomVisible: { callback: onBottomVisibleReverse, name: 'onBottomVisibleReverse' },\n        passing: { callback: onPassingReverse, name: 'onPassingReverse' },\n        topPassed: { callback: onTopPassedReverse, name: 'onTopPassedReverse' },\n        topVisible: { callback: onTopVisibleReverse, name: 'onTopVisibleReverse' }\n      };\n\n      _invoke(_this.props, 'onUpdate', null, _extends({}, _this.props, { calculations: _this.calculations }));\n      _this.fireOnPassed();\n\n      // Heads up! Reverse callbacks should be fired first\n      _forEach(reverse, function (data, value) {\n        return _this.fire(data, value, true);\n      });\n      _forEach(forward, function (data, value) {\n        return _this.fire(data, value);\n      });\n    }, _this.handleRef = function (c) {\n      return _this.ref = c;\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Visibility, [{\n    key: 'componentWillReceiveProps',\n\n\n    // ----------------------------------------\n    // Lifecycle\n    // ----------------------------------------\n\n    value: function componentWillReceiveProps(_ref3) {\n      var continuous = _ref3.continuous,\n          once = _ref3.once,\n          context = _ref3.context;\n\n      var cleanHappened = continuous !== this.props.continuous || once !== this.props.once;\n\n      // Heads up! We should clean up array of happened callbacks, if values of these props are changed\n      if (cleanHappened) this.firedCallbacks = [];\n\n      if (this.props.context !== context) {\n        this.unattachHandlers(this.props.context);\n        this.attachHandlers(context);\n      }\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (!isBrowser()) return;\n      var _props = this.props,\n          context = _props.context,\n          fireOnMount = _props.fireOnMount;\n\n\n      this.pageYOffset = window.pageYOffset;\n      this.attachHandlers(context);\n\n      if (fireOnMount) this.update();\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      var context = this.props.context;\n\n\n      this.unattachHandlers(context);\n    }\n  }, {\n    key: 'attachHandlers',\n    value: function attachHandlers(context) {\n      if (context) {\n        eventStack.sub('resize', this.handleUpdate, { target: context });\n        eventStack.sub('scroll', this.handleUpdate, { target: context });\n      }\n    }\n  }, {\n    key: 'unattachHandlers',\n    value: function unattachHandlers(context) {\n      if (context) {\n        eventStack.unsub('resize', this.handleUpdate, { target: context });\n        eventStack.unsub('scroll', this.handleUpdate, { target: context });\n      }\n    }\n\n    // ----------------------------------------\n    // Callback handling\n    // ----------------------------------------\n\n  }, {\n    key: 'execute',\n    value: function execute(callback, name) {\n      var continuous = this.props.continuous;\n\n      if (!callback) return;\n\n      // Heads up! When `continuous` is true, callback will be fired always\n      if (!continuous && _includes(this.firedCallbacks, name)) return;\n\n      callback(null, _extends({}, this.props, { calculations: this.calculations }));\n      this.firedCallbacks.push(name);\n    }\n  }, {\n    key: 'fireOnPassed',\n    value: function fireOnPassed() {\n      var _this2 = this;\n\n      var _calculations = this.calculations,\n          percentagePassed = _calculations.percentagePassed,\n          pixelsPassed = _calculations.pixelsPassed;\n      var onPassed = this.props.onPassed;\n\n\n      _forEach(onPassed, function (callback, passed) {\n        var pixelsValue = Number(passed);\n\n        if (pixelsValue && pixelsPassed >= pixelsValue) {\n          _this2.execute(callback, passed);\n          return;\n        }\n\n        var matchPercentage = ('' + passed).match(/^(\\d+)%$/);\n        if (!matchPercentage) return;\n\n        var percentageValue = Number(matchPercentage[1]) / 100;\n        if (percentagePassed >= percentageValue) _this2.execute(callback, passed);\n      });\n    }\n  }, {\n    key: 'computeCalculations',\n\n\n    // ----------------------------------------\n    // Helpers\n    // ----------------------------------------\n\n    value: function computeCalculations() {\n      var offset = this.props.offset;\n\n      var _ref$getBoundingClien = this.ref.getBoundingClientRect(),\n          bottom = _ref$getBoundingClien.bottom,\n          height = _ref$getBoundingClien.height,\n          top = _ref$getBoundingClien.top,\n          width = _ref$getBoundingClien.width;\n\n      var _normalizeOffset = normalizeOffset(offset),\n          _normalizeOffset2 = _slicedToArray(_normalizeOffset, 2),\n          topOffset = _normalizeOffset2[0],\n          bottomOffset = _normalizeOffset2[1];\n\n      var direction = window.pageYOffset > this.pageYOffset ? 'down' : 'up';\n      var topPassed = top < topOffset;\n      var bottomPassed = bottom < bottomOffset;\n\n      var pixelsPassed = bottomPassed ? 0 : Math.max(top * -1, 0);\n      var percentagePassed = pixelsPassed / height;\n\n      var bottomVisible = bottom >= bottomOffset && bottom <= window.innerHeight;\n      var topVisible = top >= topOffset && top <= window.innerHeight;\n\n      var fits = topVisible && bottomVisible;\n      var passing = topPassed && !bottomPassed;\n\n      var onScreen = (topVisible || topPassed) && !bottomPassed;\n      var offScreen = !onScreen;\n\n      return {\n        bottomPassed: bottomPassed,\n        bottomVisible: bottomVisible,\n        direction: direction,\n        fits: fits,\n        height: height,\n        passing: passing,\n        percentagePassed: percentagePassed,\n        pixelsPassed: pixelsPassed,\n        offScreen: offScreen,\n        onScreen: onScreen,\n        topPassed: topPassed,\n        topVisible: topVisible,\n        width: width\n      };\n    }\n\n    // ----------------------------------------\n    // Refs\n    // ----------------------------------------\n\n  }, {\n    key: 'render',\n\n\n    // ----------------------------------------\n    // Render\n    // ----------------------------------------\n\n    value: function render() {\n      var children = this.props.children;\n\n      var ElementType = getElementType(Visibility, this.props);\n      var rest = getUnhandledProps(Visibility, this.props);\n\n      return React.createElement(\n        ElementType,\n        _extends({}, rest, { ref: this.handleRef }),\n        children\n      );\n    }\n  }]);\n\n  return Visibility;\n}(Component);\n\nVisibility.defaultProps = {\n  context: isBrowser() ? window : null,\n  continuous: false,\n  offset: [0, 0],\n  once: true\n};\nVisibility._meta = {\n  name: 'Visibility',\n  type: META.TYPES.BEHAVIOR\n};\nVisibility.handledProps = ['as', 'children', 'context', 'continuous', 'fireOnMount', 'offset', 'onBottomPassed', 'onBottomPassedReverse', 'onBottomVisible', 'onBottomVisibleReverse', 'onOffScreen', 'onOnScreen', 'onPassed', 'onPassing', 'onPassingReverse', 'onTopPassed', 'onTopPassedReverse', 'onTopVisible', 'onTopVisibleReverse', 'onUpdate', 'once'];\nexport default Visibility;\nVisibility.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  /** An element type to render as (string or function). */\n  as: customPropTypes.as,\n\n  /** Primary content. */\n  children: PropTypes.node,\n\n  /** Context which visibility should attach onscroll events. */\n  context: PropTypes.object,\n\n  /**\n   * When set to true a callback will occur anytime an element passes a condition not just immediately after the\n   * threshold is met.\n   */\n  continuous: PropTypes.bool,\n\n  /** Fires callbacks immediately after mount. */\n  fireOnMount: PropTypes.bool,\n\n  /**\n   * Element's bottom edge has passed top of screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onBottomPassed: PropTypes.func,\n\n  /**\n   * Element's bottom edge has not passed top of screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onBottomPassedReverse: PropTypes.func,\n\n  /**\n   * Element's bottom edge has passed bottom of screen\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onBottomVisible: PropTypes.func,\n\n  /**\n   * Element's bottom edge has not passed bottom of screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onBottomVisibleReverse: PropTypes.func,\n\n  /**\n   * Value that context should be adjusted in pixels. Useful for making content appear below content fixed to the\n   * page.\n   */\n  offset: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.string]))]),\n\n  /** When set to false a callback will occur each time an element passes the threshold for a condition. */\n  once: PropTypes.bool,\n\n  /** Element is not visible on the screen. */\n  onPassed: PropTypes.object,\n\n  /**\n   * Any part of an element is visible on screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onPassing: PropTypes.func,\n\n  /**\n   * Element's top has not passed top of screen but bottom has.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onPassingReverse: PropTypes.func,\n\n  /**\n   * Element is not visible on the screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onOffScreen: PropTypes.func,\n\n  /**\n   * Element is visible on the screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onOnScreen: PropTypes.func,\n\n  /**\n   * Element's top edge has passed top of the screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onTopPassed: PropTypes.func,\n\n  /**\n   * Element's top edge has not passed top of the screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onTopPassedReverse: PropTypes.func,\n\n  /**\n   * Element's top edge has passed bottom of screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onTopVisible: PropTypes.func,\n\n  /**\n   * Element's top edge has not passed bottom of screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onTopVisibleReverse: PropTypes.func,\n\n  /**\n   * Element's top edge has passed bottom of screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onUpdate: PropTypes.func\n} : {};"]},"metadata":{},"sourceType":"module"}