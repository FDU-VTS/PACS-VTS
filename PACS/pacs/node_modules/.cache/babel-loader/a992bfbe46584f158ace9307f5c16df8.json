{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport _pick from 'lodash/pick';\nimport _reduce from 'lodash/reduce';\nimport _assign from 'lodash/assign';\nimport _invoke from 'lodash/invoke';\nimport _isArray from 'lodash/isArray';\nimport _mapValues from 'lodash/mapValues';\nimport _isNumber from 'lodash/isNumber';\nimport _includes from 'lodash/includes';\nimport _without from 'lodash/without';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { eventStack, childrenUtils, customPropTypes, getElementType, getUnhandledProps, isBrowser, META, SUI, useKeyOnly, useKeyOrValueAndKey } from '../../lib';\nimport Portal from '../../addons/Portal';\nimport PopupContent from './PopupContent';\nimport PopupHeader from './PopupHeader';\nexport var POSITIONS = ['top left', 'top right', 'bottom right', 'bottom left', 'right center', 'left center', 'top center', 'bottom center'];\n/**\n * A Popup displays additional information on top of a page.\n */\n\nvar Popup = function (_Component) {\n  _inherits(Popup, _Component);\n\n  function Popup() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Popup);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Popup.__proto__ || Object.getPrototypeOf(Popup)).call.apply(_ref, [this].concat(args))), _this), _this.state = {}, _this.hideOnScroll = function (e) {\n      _this.setState({\n        closed: true\n      });\n\n      eventStack.unsub('scroll', _this.hideOnScroll, {\n        target: window\n      });\n      setTimeout(function () {\n        return _this.setState({\n          closed: false\n        });\n      }, 50);\n\n      _this.handleClose(e);\n    }, _this.handleClose = function (e) {\n      _invoke(_this.props, 'onClose', e, _this.props);\n    }, _this.handleOpen = function (e) {\n      _this.coords = e.currentTarget.getBoundingClientRect();\n      var onOpen = _this.props.onOpen;\n      if (onOpen) onOpen(e, _this.props);\n    }, _this.handlePortalMount = function (e) {\n      var hideOnScroll = _this.props.hideOnScroll;\n      if (hideOnScroll) eventStack.sub('scroll', _this.hideOnScroll, {\n        target: window\n      });\n\n      _invoke(_this.props, 'onMount', e, _this.props);\n    }, _this.handlePortalUnmount = function (e) {\n      var hideOnScroll = _this.props.hideOnScroll;\n      if (hideOnScroll) eventStack.unsub('scroll', _this.hideOnScroll, {\n        target: window\n      });\n\n      _invoke(_this.props, 'onUnmount', e, _this.props);\n    }, _this.handlePopupRef = function (popupRef) {\n      _this.popupCoords = popupRef ? popupRef.getBoundingClientRect() : null;\n\n      _this.setPopupStyle();\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Popup, [{\n    key: 'computePopupStyle',\n    value: function computePopupStyle(positions) {\n      var style = {\n        position: 'absolute' // Do not access window/document when server side rendering\n\n      };\n      if (!isBrowser()) return style;\n      var _props = this.props,\n          horizontalOffset = _props.horizontalOffset,\n          verticalOffset = _props.verticalOffset;\n      var _window = window,\n          pageYOffset = _window.pageYOffset,\n          pageXOffset = _window.pageXOffset;\n      var _document$documentEle = document.documentElement,\n          clientWidth = _document$documentEle.clientWidth,\n          clientHeight = _document$documentEle.clientHeight;\n\n      if (_includes(positions, 'right')) {\n        style.right = Math.round(clientWidth - (this.coords.right + pageXOffset));\n        style.left = 'auto';\n      } else if (_includes(positions, 'left')) {\n        style.left = Math.round(this.coords.left + pageXOffset);\n        style.right = 'auto';\n      } else {\n        // if not left nor right, we are horizontally centering the element\n        var xOffset = (this.coords.width - this.popupCoords.width) / 2;\n        style.left = Math.round(this.coords.left + xOffset + pageXOffset);\n        style.right = 'auto';\n      }\n\n      if (_includes(positions, 'top')) {\n        style.bottom = Math.round(clientHeight - (this.coords.top + pageYOffset));\n        style.top = 'auto';\n      } else if (_includes(positions, 'bottom')) {\n        style.top = Math.round(this.coords.bottom + pageYOffset);\n        style.bottom = 'auto';\n      } else {\n        // if not top nor bottom, we are vertically centering the element\n        var yOffset = (this.coords.height + this.popupCoords.height) / 2;\n        style.top = Math.round(this.coords.bottom + pageYOffset - yOffset);\n        style.bottom = 'auto';\n\n        var _xOffset = this.popupCoords.width + 8;\n\n        if (_includes(positions, 'right')) {\n          style.right -= _xOffset;\n        } else {\n          style.left -= _xOffset;\n        }\n      }\n\n      if (horizontalOffset) {\n        if (_isNumber(style.right)) {\n          style.right -= horizontalOffset;\n        } else {\n          style.left -= horizontalOffset;\n        }\n      }\n\n      if (verticalOffset) {\n        if (_isNumber(style.top)) {\n          style.top += verticalOffset;\n        } else {\n          style.bottom += verticalOffset;\n        }\n      }\n\n      return style;\n    } // check if the style would display\n    // the popup outside of the view port\n\n  }, {\n    key: 'isStyleInViewport',\n    value: function isStyleInViewport(style) {\n      var _window2 = window,\n          pageYOffset = _window2.pageYOffset,\n          pageXOffset = _window2.pageXOffset;\n      var _document$documentEle2 = document.documentElement,\n          clientWidth = _document$documentEle2.clientWidth,\n          clientHeight = _document$documentEle2.clientHeight;\n      var element = {\n        top: style.top,\n        left: style.left,\n        width: this.popupCoords.width,\n        height: this.popupCoords.height\n      };\n\n      if (_isNumber(style.right)) {\n        element.left = clientWidth - style.right - element.width;\n      }\n\n      if (_isNumber(style.bottom)) {\n        element.top = clientHeight - style.bottom - element.height;\n      } // hidden on top\n\n\n      if (element.top < pageYOffset) return false; // hidden on the bottom\n\n      if (element.top + element.height > pageYOffset + clientHeight) return false; // hidden the left\n\n      if (element.left < pageXOffset) return false; // hidden on the right\n\n      if (element.left + element.width > pageXOffset + clientWidth) return false;\n      return true;\n    }\n  }, {\n    key: 'setPopupStyle',\n    value: function setPopupStyle() {\n      if (!this.coords || !this.popupCoords) return;\n      var position = this.props.position;\n      var style = this.computePopupStyle(position); // Lets detect if the popup is out of the viewport and adjust\n      // the position accordingly\n\n      var positions = _without(POSITIONS, position).concat([position]);\n\n      for (var i = 0; !this.isStyleInViewport(style) && i < positions.length; i += 1) {\n        style = this.computePopupStyle(positions[i]);\n        position = positions[i];\n      } // Append 'px' to every numerical values in the style\n\n\n      style = _mapValues(style, function (value) {\n        return _isNumber(value) ? value + 'px' : value;\n      });\n      this.setState({\n        style: style,\n        position: position\n      });\n    }\n  }, {\n    key: 'getPortalProps',\n    value: function getPortalProps() {\n      var portalProps = {};\n      var _props2 = this.props,\n          on = _props2.on,\n          hoverable = _props2.hoverable;\n      var normalizedOn = _isArray(on) ? on : [on];\n\n      if (hoverable) {\n        portalProps.closeOnPortalMouseLeave = true;\n        portalProps.mouseLeaveDelay = 300;\n      }\n\n      if (_includes(normalizedOn, 'click')) {\n        portalProps.openOnTriggerClick = true;\n        portalProps.closeOnTriggerClick = true;\n        portalProps.closeOnDocumentClick = true;\n      }\n\n      if (_includes(normalizedOn, 'focus')) {\n        portalProps.openOnTriggerFocus = true;\n        portalProps.closeOnTriggerBlur = true;\n      }\n\n      if (_includes(normalizedOn, 'hover')) {\n        portalProps.openOnTriggerMouseEnter = true;\n        portalProps.closeOnTriggerMouseLeave = true; // Taken from SUI: https://git.io/vPmCm\n\n        portalProps.mouseLeaveDelay = 70;\n        portalProps.mouseEnterDelay = 50;\n      }\n\n      return portalProps;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props3 = this.props,\n          basic = _props3.basic,\n          children = _props3.children,\n          className = _props3.className,\n          content = _props3.content,\n          flowing = _props3.flowing,\n          header = _props3.header,\n          inverted = _props3.inverted,\n          size = _props3.size,\n          trigger = _props3.trigger,\n          wide = _props3.wide;\n      var _state = this.state,\n          position = _state.position,\n          closed = _state.closed;\n\n      var style = _assign({}, this.state.style, this.props.style);\n\n      var classes = cx('ui', position, size, useKeyOrValueAndKey(wide, 'wide'), useKeyOnly(basic, 'basic'), useKeyOnly(flowing, 'flowing'), useKeyOnly(inverted, 'inverted'), 'popup transition visible', className);\n      if (closed) return trigger;\n      var unhandled = getUnhandledProps(Popup, this.props);\n      var portalPropNames = Portal.handledProps;\n\n      var rest = _reduce(unhandled, function (acc, val, key) {\n        if (!_includes(portalPropNames, key)) acc[key] = val;\n        return acc;\n      }, {});\n\n      var portalProps = _pick(unhandled, portalPropNames);\n\n      var ElementType = getElementType(Popup, this.props);\n      var popupJSX = React.createElement(ElementType, _extends({}, rest, {\n        className: classes,\n        style: style,\n        ref: this.handlePopupRef\n      }), children, childrenUtils.isNil(children) && PopupHeader.create(header), childrenUtils.isNil(children) && PopupContent.create(content));\n\n      var mergedPortalProps = _extends({}, this.getPortalProps(), portalProps);\n\n      return React.createElement(Portal, _extends({}, mergedPortalProps, {\n        trigger: trigger,\n        onClose: this.handleClose,\n        onMount: this.handlePortalMount,\n        onOpen: this.handleOpen,\n        onUnmount: this.handlePortalUnmount\n      }), popupJSX);\n    }\n  }]);\n\n  return Popup;\n}(Component);\n\nPopup.defaultProps = {\n  position: 'top left',\n  on: 'hover'\n};\nPopup._meta = {\n  name: 'Popup',\n  type: META.TYPES.MODULE\n};\nPopup.Content = PopupContent;\nPopup.Header = PopupHeader;\nPopup.handledProps = ['as', 'basic', 'children', 'className', 'content', 'flowing', 'header', 'hideOnScroll', 'horizontalOffset', 'hoverable', 'inverted', 'on', 'onClose', 'onMount', 'onOpen', 'onUnmount', 'position', 'size', 'style', 'trigger', 'verticalOffset', 'wide'];\nexport default Popup;\nPopup.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  /** An element type to render as (string or function). */\n  as: customPropTypes.as,\n\n  /** Display the popup without the pointing arrow. */\n  basic: PropTypes.bool,\n\n  /** Primary content. */\n  children: PropTypes.node,\n\n  /** Additional classes. */\n  className: PropTypes.string,\n\n  /** Simple text content for the popover. */\n  content: customPropTypes.itemShorthand,\n\n  /** A flowing Popup has no maximum width and continues to flow to fit its content. */\n  flowing: PropTypes.bool,\n\n  /** Takes up the entire width of its offset container. */\n  // TODO: implement the Popup fluid layout\n  // fluid: PropTypes.bool,\n\n  /** Header displayed above the content in bold. */\n  header: customPropTypes.itemShorthand,\n\n  /** Hide the Popup when scrolling the window. */\n  hideOnScroll: PropTypes.bool,\n\n  /** Whether the popup should not close on hover. */\n  hoverable: PropTypes.bool,\n\n  /** Invert the colors of the Popup. */\n  inverted: PropTypes.bool,\n\n  /** Horizontal offset in pixels to be applied to the Popup. */\n  horizontalOffset: PropTypes.number,\n\n  /** Vertical offset in pixels to be applied to the Popup. */\n  verticalOffset: PropTypes.number,\n\n  /** Events triggering the popup. */\n  on: PropTypes.oneOfType([PropTypes.oneOf(['hover', 'click', 'focus']), PropTypes.arrayOf(PropTypes.oneOf(['hover', 'click', 'focus']))]),\n\n  /**\n   * Called when a close event happens.\n   *\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\n   * @param {object} data - All props.\n   */\n  onClose: PropTypes.func,\n\n  /**\n   * Called when the portal is mounted on the DOM.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onMount: PropTypes.func,\n\n  /**\n   * Called when an open event happens.\n   *\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\n   * @param {object} data - All props.\n   */\n  onOpen: PropTypes.func,\n\n  /**\n   * Called when the portal is unmounted from the DOM.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onUnmount: PropTypes.func,\n\n  /** Position for the popover. */\n  position: PropTypes.oneOf(POSITIONS),\n\n  /** Popup size. */\n  size: PropTypes.oneOf(_without(SUI.SIZES, 'medium', 'big', 'massive')),\n\n  /** Custom Popup style. */\n  style: PropTypes.object,\n\n  /** Element to be rendered in-place where the popup is defined. */\n  trigger: PropTypes.node,\n\n  /** Popup width. */\n  wide: PropTypes.oneOfType([PropTypes.bool, PropTypes.oneOf(['very'])])\n} : {};","map":{"version":3,"sources":["/Users/bly/Documents/工作/实验室/项目/医疗系统/PACS/pacs/node_modules/semantic-ui-react/dist/es/modules/Popup/Popup.js"],"names":["_extends","_classCallCheck","_createClass","_possibleConstructorReturn","_inherits","_pick","_reduce","_assign","_invoke","_isArray","_mapValues","_isNumber","_includes","_without","cx","PropTypes","React","Component","eventStack","childrenUtils","customPropTypes","getElementType","getUnhandledProps","isBrowser","META","SUI","useKeyOnly","useKeyOrValueAndKey","Portal","PopupContent","PopupHeader","POSITIONS","Popup","_Component","_ref","_temp","_this","_ret","_len","arguments","length","args","Array","_key","__proto__","Object","getPrototypeOf","call","apply","concat","state","hideOnScroll","e","setState","closed","unsub","target","window","setTimeout","handleClose","props","handleOpen","coords","currentTarget","getBoundingClientRect","onOpen","handlePortalMount","sub","handlePortalUnmount","handlePopupRef","popupRef","popupCoords","setPopupStyle","key","value","computePopupStyle","positions","style","position","_props","horizontalOffset","verticalOffset","_window","pageYOffset","pageXOffset","_document$documentEle","document","documentElement","clientWidth","clientHeight","right","Math","round","left","xOffset","width","bottom","top","yOffset","height","_xOffset","isStyleInViewport","_window2","_document$documentEle2","element","i","getPortalProps","portalProps","_props2","on","hoverable","normalizedOn","closeOnPortalMouseLeave","mouseLeaveDelay","openOnTriggerClick","closeOnTriggerClick","closeOnDocumentClick","openOnTriggerFocus","closeOnTriggerBlur","openOnTriggerMouseEnter","closeOnTriggerMouseLeave","mouseEnterDelay","render","_props3","basic","children","className","content","flowing","header","inverted","size","trigger","wide","_state","classes","unhandled","portalPropNames","handledProps","rest","acc","val","ElementType","popupJSX","createElement","ref","isNil","create","mergedPortalProps","onClose","onMount","onUnmount","defaultProps","_meta","name","type","TYPES","MODULE","Content","Header","propTypes","process","env","NODE_ENV","as","bool","node","string","itemShorthand","number","oneOfType","oneOf","arrayOf","func","SIZES","object"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport _pick from 'lodash/pick';\nimport _reduce from 'lodash/reduce';\nimport _assign from 'lodash/assign';\nimport _invoke from 'lodash/invoke';\nimport _isArray from 'lodash/isArray';\nimport _mapValues from 'lodash/mapValues';\nimport _isNumber from 'lodash/isNumber';\nimport _includes from 'lodash/includes';\nimport _without from 'lodash/without';\nimport cx from 'classnames';\n\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\n\nimport { eventStack, childrenUtils, customPropTypes, getElementType, getUnhandledProps, isBrowser, META, SUI, useKeyOnly, useKeyOrValueAndKey } from '../../lib';\nimport Portal from '../../addons/Portal';\nimport PopupContent from './PopupContent';\nimport PopupHeader from './PopupHeader';\n\nexport var POSITIONS = ['top left', 'top right', 'bottom right', 'bottom left', 'right center', 'left center', 'top center', 'bottom center'];\n\n/**\n * A Popup displays additional information on top of a page.\n */\n\nvar Popup = function (_Component) {\n  _inherits(Popup, _Component);\n\n  function Popup() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Popup);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Popup.__proto__ || Object.getPrototypeOf(Popup)).call.apply(_ref, [this].concat(args))), _this), _this.state = {}, _this.hideOnScroll = function (e) {\n      _this.setState({ closed: true });\n\n      eventStack.unsub('scroll', _this.hideOnScroll, { target: window });\n      setTimeout(function () {\n        return _this.setState({ closed: false });\n      }, 50);\n\n      _this.handleClose(e);\n    }, _this.handleClose = function (e) {\n\n      _invoke(_this.props, 'onClose', e, _this.props);\n    }, _this.handleOpen = function (e) {\n      _this.coords = e.currentTarget.getBoundingClientRect();\n\n      var onOpen = _this.props.onOpen;\n\n      if (onOpen) onOpen(e, _this.props);\n    }, _this.handlePortalMount = function (e) {\n      var hideOnScroll = _this.props.hideOnScroll;\n\n\n      if (hideOnScroll) eventStack.sub('scroll', _this.hideOnScroll, { target: window });\n      _invoke(_this.props, 'onMount', e, _this.props);\n    }, _this.handlePortalUnmount = function (e) {\n      var hideOnScroll = _this.props.hideOnScroll;\n\n\n      if (hideOnScroll) eventStack.unsub('scroll', _this.hideOnScroll, { target: window });\n      _invoke(_this.props, 'onUnmount', e, _this.props);\n    }, _this.handlePopupRef = function (popupRef) {\n      _this.popupCoords = popupRef ? popupRef.getBoundingClientRect() : null;\n      _this.setPopupStyle();\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Popup, [{\n    key: 'computePopupStyle',\n    value: function computePopupStyle(positions) {\n      var style = { position: 'absolute'\n\n        // Do not access window/document when server side rendering\n      };if (!isBrowser()) return style;\n\n      var _props = this.props,\n          horizontalOffset = _props.horizontalOffset,\n          verticalOffset = _props.verticalOffset;\n      var _window = window,\n          pageYOffset = _window.pageYOffset,\n          pageXOffset = _window.pageXOffset;\n      var _document$documentEle = document.documentElement,\n          clientWidth = _document$documentEle.clientWidth,\n          clientHeight = _document$documentEle.clientHeight;\n\n\n      if (_includes(positions, 'right')) {\n        style.right = Math.round(clientWidth - (this.coords.right + pageXOffset));\n        style.left = 'auto';\n      } else if (_includes(positions, 'left')) {\n        style.left = Math.round(this.coords.left + pageXOffset);\n        style.right = 'auto';\n      } else {\n        // if not left nor right, we are horizontally centering the element\n        var xOffset = (this.coords.width - this.popupCoords.width) / 2;\n        style.left = Math.round(this.coords.left + xOffset + pageXOffset);\n        style.right = 'auto';\n      }\n\n      if (_includes(positions, 'top')) {\n        style.bottom = Math.round(clientHeight - (this.coords.top + pageYOffset));\n        style.top = 'auto';\n      } else if (_includes(positions, 'bottom')) {\n        style.top = Math.round(this.coords.bottom + pageYOffset);\n        style.bottom = 'auto';\n      } else {\n        // if not top nor bottom, we are vertically centering the element\n        var yOffset = (this.coords.height + this.popupCoords.height) / 2;\n        style.top = Math.round(this.coords.bottom + pageYOffset - yOffset);\n        style.bottom = 'auto';\n\n        var _xOffset = this.popupCoords.width + 8;\n        if (_includes(positions, 'right')) {\n          style.right -= _xOffset;\n        } else {\n          style.left -= _xOffset;\n        }\n      }\n\n      if (horizontalOffset) {\n        if (_isNumber(style.right)) {\n          style.right -= horizontalOffset;\n        } else {\n          style.left -= horizontalOffset;\n        }\n      }\n\n      if (verticalOffset) {\n        if (_isNumber(style.top)) {\n          style.top += verticalOffset;\n        } else {\n          style.bottom += verticalOffset;\n        }\n      }\n\n      return style;\n    }\n\n    // check if the style would display\n    // the popup outside of the view port\n\n  }, {\n    key: 'isStyleInViewport',\n    value: function isStyleInViewport(style) {\n      var _window2 = window,\n          pageYOffset = _window2.pageYOffset,\n          pageXOffset = _window2.pageXOffset;\n      var _document$documentEle2 = document.documentElement,\n          clientWidth = _document$documentEle2.clientWidth,\n          clientHeight = _document$documentEle2.clientHeight;\n\n\n      var element = {\n        top: style.top,\n        left: style.left,\n        width: this.popupCoords.width,\n        height: this.popupCoords.height\n      };\n      if (_isNumber(style.right)) {\n        element.left = clientWidth - style.right - element.width;\n      }\n      if (_isNumber(style.bottom)) {\n        element.top = clientHeight - style.bottom - element.height;\n      }\n\n      // hidden on top\n      if (element.top < pageYOffset) return false;\n      // hidden on the bottom\n      if (element.top + element.height > pageYOffset + clientHeight) return false;\n      // hidden the left\n      if (element.left < pageXOffset) return false;\n      // hidden on the right\n      if (element.left + element.width > pageXOffset + clientWidth) return false;\n\n      return true;\n    }\n  }, {\n    key: 'setPopupStyle',\n    value: function setPopupStyle() {\n      if (!this.coords || !this.popupCoords) return;\n      var position = this.props.position;\n      var style = this.computePopupStyle(position);\n\n      // Lets detect if the popup is out of the viewport and adjust\n      // the position accordingly\n      var positions = _without(POSITIONS, position).concat([position]);\n      for (var i = 0; !this.isStyleInViewport(style) && i < positions.length; i += 1) {\n        style = this.computePopupStyle(positions[i]);\n        position = positions[i];\n      }\n\n      // Append 'px' to every numerical values in the style\n      style = _mapValues(style, function (value) {\n        return _isNumber(value) ? value + 'px' : value;\n      });\n      this.setState({ style: style, position: position });\n    }\n  }, {\n    key: 'getPortalProps',\n    value: function getPortalProps() {\n      var portalProps = {};\n\n      var _props2 = this.props,\n          on = _props2.on,\n          hoverable = _props2.hoverable;\n\n      var normalizedOn = _isArray(on) ? on : [on];\n\n      if (hoverable) {\n        portalProps.closeOnPortalMouseLeave = true;\n        portalProps.mouseLeaveDelay = 300;\n      }\n      if (_includes(normalizedOn, 'click')) {\n        portalProps.openOnTriggerClick = true;\n        portalProps.closeOnTriggerClick = true;\n        portalProps.closeOnDocumentClick = true;\n      }\n      if (_includes(normalizedOn, 'focus')) {\n        portalProps.openOnTriggerFocus = true;\n        portalProps.closeOnTriggerBlur = true;\n      }\n      if (_includes(normalizedOn, 'hover')) {\n        portalProps.openOnTriggerMouseEnter = true;\n        portalProps.closeOnTriggerMouseLeave = true;\n        // Taken from SUI: https://git.io/vPmCm\n        portalProps.mouseLeaveDelay = 70;\n        portalProps.mouseEnterDelay = 50;\n      }\n\n      return portalProps;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props3 = this.props,\n          basic = _props3.basic,\n          children = _props3.children,\n          className = _props3.className,\n          content = _props3.content,\n          flowing = _props3.flowing,\n          header = _props3.header,\n          inverted = _props3.inverted,\n          size = _props3.size,\n          trigger = _props3.trigger,\n          wide = _props3.wide;\n      var _state = this.state,\n          position = _state.position,\n          closed = _state.closed;\n\n      var style = _assign({}, this.state.style, this.props.style);\n      var classes = cx('ui', position, size, useKeyOrValueAndKey(wide, 'wide'), useKeyOnly(basic, 'basic'), useKeyOnly(flowing, 'flowing'), useKeyOnly(inverted, 'inverted'), 'popup transition visible', className);\n\n      if (closed) return trigger;\n\n      var unhandled = getUnhandledProps(Popup, this.props);\n      var portalPropNames = Portal.handledProps;\n\n      var rest = _reduce(unhandled, function (acc, val, key) {\n        if (!_includes(portalPropNames, key)) acc[key] = val;\n\n        return acc;\n      }, {});\n      var portalProps = _pick(unhandled, portalPropNames);\n      var ElementType = getElementType(Popup, this.props);\n\n      var popupJSX = React.createElement(\n        ElementType,\n        _extends({}, rest, { className: classes, style: style, ref: this.handlePopupRef }),\n        children,\n        childrenUtils.isNil(children) && PopupHeader.create(header),\n        childrenUtils.isNil(children) && PopupContent.create(content)\n      );\n\n      var mergedPortalProps = _extends({}, this.getPortalProps(), portalProps);\n\n\n      return React.createElement(\n        Portal,\n        _extends({}, mergedPortalProps, {\n          trigger: trigger,\n          onClose: this.handleClose,\n          onMount: this.handlePortalMount,\n          onOpen: this.handleOpen,\n          onUnmount: this.handlePortalUnmount\n        }),\n        popupJSX\n      );\n    }\n  }]);\n\n  return Popup;\n}(Component);\n\nPopup.defaultProps = {\n  position: 'top left',\n  on: 'hover'\n};\nPopup._meta = {\n  name: 'Popup',\n  type: META.TYPES.MODULE\n};\nPopup.Content = PopupContent;\nPopup.Header = PopupHeader;\nPopup.handledProps = ['as', 'basic', 'children', 'className', 'content', 'flowing', 'header', 'hideOnScroll', 'horizontalOffset', 'hoverable', 'inverted', 'on', 'onClose', 'onMount', 'onOpen', 'onUnmount', 'position', 'size', 'style', 'trigger', 'verticalOffset', 'wide'];\nexport default Popup;\nPopup.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  /** An element type to render as (string or function). */\n  as: customPropTypes.as,\n\n  /** Display the popup without the pointing arrow. */\n  basic: PropTypes.bool,\n\n  /** Primary content. */\n  children: PropTypes.node,\n\n  /** Additional classes. */\n  className: PropTypes.string,\n\n  /** Simple text content for the popover. */\n  content: customPropTypes.itemShorthand,\n\n  /** A flowing Popup has no maximum width and continues to flow to fit its content. */\n  flowing: PropTypes.bool,\n\n  /** Takes up the entire width of its offset container. */\n  // TODO: implement the Popup fluid layout\n  // fluid: PropTypes.bool,\n\n  /** Header displayed above the content in bold. */\n  header: customPropTypes.itemShorthand,\n\n  /** Hide the Popup when scrolling the window. */\n  hideOnScroll: PropTypes.bool,\n\n  /** Whether the popup should not close on hover. */\n  hoverable: PropTypes.bool,\n\n  /** Invert the colors of the Popup. */\n  inverted: PropTypes.bool,\n\n  /** Horizontal offset in pixels to be applied to the Popup. */\n  horizontalOffset: PropTypes.number,\n\n  /** Vertical offset in pixels to be applied to the Popup. */\n  verticalOffset: PropTypes.number,\n\n  /** Events triggering the popup. */\n  on: PropTypes.oneOfType([PropTypes.oneOf(['hover', 'click', 'focus']), PropTypes.arrayOf(PropTypes.oneOf(['hover', 'click', 'focus']))]),\n\n  /**\n   * Called when a close event happens.\n   *\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\n   * @param {object} data - All props.\n   */\n  onClose: PropTypes.func,\n\n  /**\n   * Called when the portal is mounted on the DOM.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onMount: PropTypes.func,\n\n  /**\n   * Called when an open event happens.\n   *\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\n   * @param {object} data - All props.\n   */\n  onOpen: PropTypes.func,\n\n  /**\n   * Called when the portal is unmounted from the DOM.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onUnmount: PropTypes.func,\n\n  /** Position for the popover. */\n  position: PropTypes.oneOf(POSITIONS),\n\n  /** Popup size. */\n  size: PropTypes.oneOf(_without(SUI.SIZES, 'medium', 'big', 'massive')),\n\n  /** Custom Popup style. */\n  style: PropTypes.object,\n\n  /** Element to be rendered in-place where the popup is defined. */\n  trigger: PropTypes.node,\n\n  /** Popup width. */\n  wide: PropTypes.oneOfType([PropTypes.bool, PropTypes.oneOf(['very'])])\n} : {};"]},"metadata":{},"sourceType":"module"}